{
  "project": "SciDigest AI",
  "version": "1.6.1",
  "meta": {
    "executive_summary": "SciDigest AI is a high-velocity environment for the ingestion, triage, and synthesis of scientific literature. It is designed to move researchers from 'Information Overload' to 'Methodological Mastery.'",
    "philosophy": "Local-first, adversarial intelligence, high-velocity ingestion. Single source of truth is plan.json.",
    "core_concepts": [
      "Deep Ingestion: Split-pane PDF analysis with adversarial auditing and scenario exploration.",
      "Intelligent Triage: RLHF-driven recommendation engine and knowledge mapping.",
      "Knowledge Mapping: Conceptual graphs and Dunning-Kruger tracking."
    ],
    "safety_protocol": {
      "no_silent_deletion": "Never delete a file without explicit user permission.",
      "mandatory_checkpoint": "Request 'Full JSON Backup' before any structural pruning.",
      "reversibility": "Document pruning processes for manual reversion.",
      "privacy": "No API keys or PII written to log buffers."
    }
  },
  "modules": [
    {
      "id": "ui_ux_layout",
      "name": "Navigation & Layout",
      "context": "Responsive Workspace Layout",
      "triggers": [
        {
          "action": "Toggle Sidebar Collapse",
          "functionality": "Allows users to manually collapse the main sidebar to a mini-view (icons only) or expand to full-view.",
          "ui_location": "Sidebar -> Right Edge Toggle Tab"
        },
        {
          "action": "Toggle Reader Insights Panel",
          "functionality": "Allows collapsing the top-mounted research insights panel in the Reader.",
          "ui_location": "Reader -> Top Bar Toggle"
        },
        {
          "action": "Toggle Reader Notes Panel",
          "functionality": "Allows collapsing the side-mounted notes panel (Right) in the Reader.",
          "ui_location": "Reader -> Right Bar Toggle"
        }
      ]
    },
    {
      "id": "pdf_viewer",
      "name": "PDF Viewer",
      "context": "Primary research analysis window",
      "functionality": "The main viewport of the Reader. Displays PDF contents via iframe with full scroll support. Must support local-first PDFs uploaded by the user (including large files on mobile/tablet) by rendering from a persistent local storage source (e.g. IndexedDB blob -> object URL) with safe fallback for non-embeddable remote sources.",
      "ui_location": "Reader -> Main Viewport"
    },
    {
      "id": "reviewer_2",
      "name": "Reviewer 2 Protocol",
      "context": "Adversarial Methodology Audit",
      "model": "gemini-3-pro-preview",
      "triggers": [
        {
          "action": "Trigger Adversarial Audit",
          "service_method": "geminiService.runReviewer2Audit",
          "ui_location": "Reader Top Bar -> Insights -> Reviewer 2 Tab"
        },
        {
          "action": "Append to Notes",
          "functionality": "Concatenates the critical report to the bottom of the current annotations and ensures the Notes panel is visible.",
          "ui_location": "Reader Top Bar -> Insights -> Reviewer 2 (Post-result)"
        }
      ],
      "tests": "tests/Reviewer2.test.tsx"
    },
    {
      "id": "what_if",
      "name": "What If Assistant",
      "context": "Scenario Exploration",
      "model": "gemini-3-pro-preview",
      "triggers": [
        {
          "action": "Analyze Scenario",
          "service_method": "geminiService.askWhatIf",
          "ui_location": "Reader Top Bar -> Insights -> What If Tab"
        },
        {
          "action": "Append to Notes",
          "functionality": "Concatenates the scenario implications to the bottom of the current annotations and ensures the Notes panel is visible.",
          "ui_location": "Reader Top Bar -> Insights -> What If (Post-result)"
        }
      ],
      "tests": "tests/WhatIf.test.tsx"
    },
    {
      "id": "research_tracker",
      "name": "Sonar Tracker",
      "context": "Live Sonar for Citations and Bibliography Updates",
      "model": "gemini-3-flash-preview",
      "grounding": "googleSearch",
      "triggers": [
        {
          "action": "Pinging Network",
          "service_method": "geminiService.getRadarUpdates",
          "ui_location": "Tracker Tab -> Top Header"
        }
      ],
      "tests": "tests/Tracker.test.tsx"
    },
    {
      "id": "trending_discovery",
      "name": "Scholar Trends",
      "context": "Direct Academic Repository Sweeping",
      "model": "Semantic Scholar API / Gemini for Amazon",
      "triggers": [
        {
          "action": "Sweep Repositories",
          "service_method": "academicApiService.searchScholar",
          "ui_location": "Trending Tab -> Top Header"
        }
      ]
    },
    {
      "id": "library_management",
      "name": "Scientific Library",
      "context": "Organized Ingestion and Sovereignty",
      "triggers": [
        {
          "action": "Sync Scholar",
          "functionality": "Ingests all publications from a user profile into local library.",
          "ui_location": "Library Section -> Header"
        },
        {
          "action": "NotebookLM Export",
          "functionality": "Generates a specialized analysis bundle for Google NotebookLM ingestion.",
          "ui_location": "Library Section -> Floating Shelf Dock"
        },
        {
          "action": "Delete Paper",
          "functionality": "Removes a paper from the local Scientific Library after explicit user confirmation. This operation is local-only and does not affect any external services.",
          "ui_location": "Library Section -> Article Card -> More/Delete"
        },
        {
          "action": "View Storage Status",
          "functionality": "Displays real-time cloud sync and encryption status.",
          "ui_location": "Settings Section -> Cloud Synchronization"
        }
      ],
      "tests": "tests/LibrarySection.test.tsx"
    },
    {
      "id": "rabbit_hole",
      "name": "Rabbit Hole Explorer",
      "context": "Citation Mining & Lineage Discovery",
      "model": "gemini-3-flash-preview",
      "grounding": "googleSearch",
      "triggers": [
        {
          "action": "Discover Forward Citations",
          "service_method": "geminiService.discoverReferences",
          "ui_location": "Reader Top Bar -> Insights -> Rabbit Hole Tab"
        }
      ],
      "tests": "tests/RabbitHole.test.tsx"
    },
    {
      "id": "ai_discovery",
      "name": "AI Discovery",
      "context": "Personalized Research Feed Cards",
      "triggers": [
        {
          "action": "Generate Discovery Card",
          "functionality": "Displays Source, Date, Title, 1-sentence Brief Description (QuickTake), and Matching Topics. Includes Queue (Shelf icon), Library Ingestion (Library icon), and Reader Launch (Reader icon). Entire card area triggers Reader.",
          "ui_location": "Discovery Feed"
        }
      ]
    },
    {
      "id": "quick_take",
      "name": "Sprint QuickTake",
      "context": "1-Sentence Technical Essence",
      "model": "gemini-3-flash-preview",
      "triggers": [
        {
          "action": "Generate Quick Take",
          "service_method": "geminiService.generateQuickTake",
          "ui_location": "Discovery Feed Cards"
        }
      ]
    },
    {
      "id": "academy",
      "name": "Research Academy",
      "context": "Competence Mapping (Dunning-Kruger)",
      "triggers": [
        {
          "action": "Generate 10-Question Quiz",
          "functionality": "Validates deep internalization of methodology.",
          "ui_location": "Reader Top Bar -> Insights -> Quiz Tab"
        }
      ]
    },
    {
      "id": "telemetry",
      "name": "AI Usage",
      "context": "Real-time cost and performance monitoring",
      "triggers": [
        {
          "action": "Monitor AI Consumption",
          "functionality": "Tracks token usage and estimated costs.",
          "ui_location": "Sidebar -> AI Usage"
        }
      ]
    },
    {
      "id": "synthesis",
      "name": "Research Synthesis",
      "context": "Cross-document thematic analysis",
      "model": "gemini-3-pro-preview",
      "triggers": [
        {
          "action": "Synthesize Literature",
          "service_method": "geminiService.synthesizeResearch",
          "ui_location": "Library Section -> Floating Shelf Dock -> Synthesis Button"
        }
      ]
    },
    {
      "id": "diagnostics",
      "name": "System Diagnostics",
      "context": "Local-first error tracking and AI triage support",
      "triggers": [
        {
          "action": "Generate AI Diagnostic",
          "functionality": "Copies signed system state for external LLM triage.",
          "ui_location": "Sidebar -> System Logs -> Copy for AI Analysis"
        },
        {
          "action": "Run Integrity Suite",
          "functionality": "Executes a sequence of automated health checks against critical zones (Data, AI, UX).",
          "ui_location": "Sidebar -> System Logs -> Run Integrity Suite"
        }
      ]
    },
    {
      "id": "metadata_ingestion",
      "name": "Metadata Ingestion",
      "context": "Local PDF ingestion and optional AI metadata enrichment",
      "triggers": [
        {
          "action": "PDF File Ingestion",
          "service_method": "geminiService.extractMetadataFromPDF (optional)",
          "functionality": "User selects a local PDF file (any PDF) which is immediately ingested into the Library and must be readable in the Reader. Implementation must be robust on mobile/tablet: store the PDF locally in a persistent binary-friendly store (IndexedDB blob), persist a small reference key on the Article (e.g. pdfStorageId), and have the Reader resolve/render from that store. If Gemini is configured, extractMetadataFromPDF is used to enrich title/authors/abstract; if not, the PDF remains fully viewable with basic filename-derived metadata.",
          "ui_location": "Library Section -> Add Paper (PDF File Only)"
        }
      ]
    }
  ],
  "infrastructure": {
    "persistence": "localStorage (dbService)",
    "security": "AES-GCM 256-bit Client-side encryption (cloudSyncService)",
    "export_formats": ["JSON", "BibTeX", "Markdown"]
  },
  "quality_assurance": {
    "critical_zones": [
      {
        "zone": "Data Sovereignty & Persistence",
        "verification_points": [
          "State survives browser refresh (localStorage)",
          "AES-GCM client-side encryption for Cloud Sync",
          "JSON backup/restore integrity",
          "BibTeX standard compliance"
        ]
      },
      {
        "zone": "AI Ingestion & Analysis",
        "verification_points": [
          "Gemini Flash metadata extraction accuracy",
          "Reviewer 2 adversarial logic depth",
          "Search grounding URL visibility in UI",
          "QuickTake technical precision"
        ]
      },
      {
        "zone": "Research UX",
        "verification_points": [
          "Bi-directional Reader timer/db sync",
          "Rabbit Hole citation library-matching",
          "Force-graph node stability",
          "Academy Dunning-Kruger rank mapping"
        ]
      }
    ],
    "diagnostic_protocol": {
      "signatures": {
        "header": "--- SCI-DIGEST SYSTEM LOG DATA [vVERSION_NUMBER] ---",
        "metadata": "METADATA: Exported=TIMESTAMP | DebugMode=BOOLEAN | BufferSize=INT",
        "footer": "--- END OF LOG DATA ---"
      },
      "ai_reaction_steps": [
        "Interrupt flow to acknowledge specific application version.",
        "Verify DebugMode status from metadata.",
        "Locate first [ERROR] or [WARNING] in the sequence.",
        "Map context (CTX) to the source code file and line.",
        "Propose immediate fix with a regression test plan."
      ]
    }
  }
}