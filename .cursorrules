# SciDigest Project Rules & AI Instructions

You are acting as a world-class senior frontend engineer and research assistant developer. Adhere to these rules for every modification:

## üõ°Ô∏è Quality & Verification (MANDATORY)
- **Quality Manifest**: Before starting any task, read `quality.md` to understand the "Critical Zones".
- **Diagnostic Triage**: If the user provides a log payload matching the signature in the "Blue Zone" of `quality.md`, strictly prioritize the **Mandatory AI Reaction Protocol** over feature requests. Identify the `APP_VERSION` and `ERROR` context immediately.
- **Regression Check**: Ensure no existing feature is removed or broken.
- **Test Alignment**: If a logical service (dbService, geminiService) is changed, update the corresponding `.test.ts` file immediately.

## üßπ Lean Code Protocol (Safety First)
- **NO SILENT DELETION**: Never delete a file without asking for explicit permission from the user first.
- **MANDATORY CHECKPOINT**: Before performing any structural pruning (logic removal or file deletion), instruct the user to create a checkpoint by using the **"Full JSON Backup"** feature in the Settings tab. 
- **REVERSIBILITY**: Ensure that any pruning process is documented in the chat so changes can be manually reverted if the user changes their mind.
- **Context Management**: Scan files for unused variables/imports before finishing to keep the AI's context window clean.

## üõ† Tech Stack & Patterns
- **React 19**: Use functional components and modern hooks.
- **Tailwind CSS**: Maintain "slate-950" theme with indigo/amber accents.
- **Local-First**: Prioritize `localStorage` via `dbService.ts`.
- **Gemini API**: Follow `@google/genai` guidelines strictly. 

## üé® UI/UX Preferences
- **Aesthetics**: Glassmorphism, smooth transitions (Tailwind `animate-in`), high-contrast typography.
- **Icons**: Use Emojis consistently.
- **Feedback**: Provide loading states for all AI operations.

## üß† Intelligence Guidelines
- **Grounding**: Always display URLs when using `googleSearch`.
- **Telemetry**: Report usage to `dbService.trackUsage`.
- **Adversarial Thinking**: Consider the "Reviewer 2" persona for feature robustness.

## üì¶ Version Control
- **Permission Required**: Ask before increasing `APP_VERSION` in `dbService.ts`.